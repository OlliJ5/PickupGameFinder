(window["webpackJsonppick-up-game-finder"]=window["webpackJsonppick-up-game-finder"]||[]).push([[0],{307:function(e,t,a){e.exports=a.p+"static/media/kobe.4b4fdbac.jpg"},309:function(e,t,a){e.exports=a.p+"static/media/bball.527662f6.svg"},319:function(e,t,a){e.exports=a.p+"static/media/welcome.1ac2b16f.png"},320:function(e,t,a){e.exports=a.p+"static/media/findGames.f2699377.png"},321:function(e,t,a){e.exports=a.p+"static/media/joinGame.ff31d000.png"},322:function(e,t,a){e.exports=a.p+"static/media/createGame.07381b68.png"},323:function(e,t,a){e.exports=a.p+"static/media/placeholderprofilepic.f31f5f98.png"},337:function(e,t,a){e.exports=a(521)},519:function(e,t,a){},521:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(48),o=a.n(c),l=a(36),i=a(138),s=a(30),u=a(547),m=a(544),p=a(533),d=a(543),f=a(545),g=a(534),h=a(13),b=a.n(h),E=a(56),v=a(25),y=a(46),k=a.n(y),w=null,x="";x="https://pickupgamefinder.herokuapp.com";var O={create:function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat(x).concat("/api/users"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:w}},e.next=3,k.a.put("".concat(x).concat("/api/users","/").concat(t.id),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){w="bearer ".concat(e)}},C="";C="https://pickupgamefinder.herokuapp.com";var S={login:function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat(C).concat("/api/login"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=null,I="";I="https://pickupgamefinder.herokuapp.com";var T={getAllActive:function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(I).concat("/api/games","/active"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:j}},e.next=3,k.a.post("".concat(I).concat("/api/games"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getByOwner:function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(I).concat("/api/games","/owner/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){j="bearer ".concat(e)}},N=null,G="";G="https://pickupgamefinder.herokuapp.com";var L={setToken:function(e){N="bearer ".concat(e)},create:function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:N}},e.next=3,k.a.post("".concat(G).concat("/api/players"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getByUser:function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(G).concat("/api/players","/user/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.login({username:e,password:t});case 3:r=a.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(r)),T.setToken(r.token),L.setToken(r.token),O.setToken(r.token),n({type:"LOGIN",user:r}),a.next=14;break;case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",a.t0.response);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"STAY_LOGGED_IN":return t.user;case"LOGOUT":return null;case"DISABLE_INTRO":return Object(E.a)({},e,{showIntro:!1});case"":return t.updatedUser;default:return e}},P=a(541),z=a(40),M=a(63),_=a(67),R=a(12),H=a(174),V=function(e){var t=e.label,a=e.textColor,n=e.inputClass,c=Object(H.a)(e,["label","textColor","inputClass"]),o=Object(M.c)(c),l=Object(R.a)(o,2),i=l[0],s=l[1];return r.a.createElement("div",{className:"field"},t&&r.a.createElement("label",{htmlFor:c.id||c.name,style:{color:a}},t),r.a.createElement("div",{className:"fluid ui input"},r.a.createElement("input",Object.assign({className:n},i,c))),s.touched&&s.error?r.a.createElement("div",{style:{color:"red"}},s.error):"")},B=Object(l.b)(null,{login:A})((function(e){var t="dark"===e.colorScheme?"white":"black",a="dark"===e.colorScheme?"inputDark":"",n="dark"===e.colorScheme?"segmentDarkest":"",c=function(){var t=Object(v.a)(b.a.mark((function t(a,n){var r,c,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.setSubmitting,c=n.setFieldError,t.prev=1,o=Object(E.a)({},a),t.next=5,O.create(o);case 5:e.login(o.username,o.password),z.a.info("Welcome ".concat(o.username),{position:z.a.POSITION.TOP_CENTER}),r(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response.data.error.includes("unique")&&c("username","Username already taken");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(d.a,null,r.a.createElement(d.a.Column,null,r.a.createElement(m.a,{className:n},r.a.createElement(f.a,{as:"h2",style:{color:t}},"Sign up"),r.a.createElement(M.b,{initialValues:{username:"",name:"",password:""},validationSchema:_.b({username:_.c().min(3,"Must be at least 3 characters").max(15,"Must be 15 characters or less").required(),name:_.c().min(2,"Must be at least 2 characters").max(30,"Must be 30 characters or less").required(),password:_.c().min(5,"Must be at least 5 characters").required()}),onSubmit:c},(function(e){return r.a.createElement(M.a,{className:"ui form"},r.a.createElement(V,{label:"Username",name:"username",placeholder:"Username (3-15 characters)",type:"text",inputClass:a,textColor:t,id:"username"}),r.a.createElement(V,{label:"Name",name:"name",placeholder:"Name (2-30 characters)",type:"text",inputClass:a,textColor:t,id:"name"}),r.a.createElement(V,{label:"Password",name:"password",placeholder:"Password (min. 5 characters)",type:"password",inputClass:a,textColor:t,id:"password"}),r.a.createElement(P.a,{type:"submit",primary:!0,fluid:!0,loading:e.isSubmitting,disabled:e.isSubmitting,size:"large",id:"accountCreation-button"},"Sign up"))})))))})),U=a(536),W=a(540),F=Object(l.b)(null,{login:A})((function(e){var t=Object(n.useState)(""),a=Object(R.a)(t,2),c=a[0],o=a[1],l="dark"===e.colorScheme?"inputDark":"",i=e.textColor,s=function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.login(a.username,a.password);case 2:(n=t.sent)?o(n.data.error):z.a.info("Welcome ".concat(a.username),{position:z.a.POSITION.TOP_CENTER});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(M.b,{initialValues:{username:"",password:""},onSubmit:s},(function(e){return r.a.createElement(M.a,{className:"ui form"},r.a.createElement(f.a,{as:"h2",style:{color:i}},"Login"),r.a.createElement(U.a.Group,{inline:!0,widths:"equal"},r.a.createElement(V,{name:"username",placeholder:"Username",type:"text",inputClass:l,textColor:"white",id:"login-username"}),r.a.createElement(V,{name:"password",placeholder:"Password",type:"password",inputClass:l,textColor:"white",id:"login-password"}),r.a.createElement(P.a,{type:"submit",primary:!0,loading:e.isSubmitting,id:"login-button"},"Login")),""!==c&&r.a.createElement(W.a,null,c))}))})),q=a(307),J=a.n(q),Z=function(e){var t=e.colorScheme,a="dark"===t?"white":"black",n="dark"===t?"segmentDarkest":"";return r.a.createElement("div",null,r.a.createElement(u.a,{minWidth:768},r.a.createElement(m.a,{inverted:!0,style:{minHeight:600,padding:"1em 0em"},vertical:!0},r.a.createElement(p.a,null,r.a.createElement(d.a,{columns:2,style:{marginTop:"25px"}},r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Column,null),r.a.createElement(d.a.Column,null,r.a.createElement(F,{colorScheme:t,textColor:"white"})))),r.a.createElement(f.a,{as:"h1",inverted:!0,style:{fontWeight:"normal",fontSize:"3em",marginBottom:0,marginTop:"3em"}},"Pickupgame finder"),r.a.createElement(f.a,{as:"h2",inverted:!0,style:{fontSize:"1.5em",fontWeight:"normal",marginTop:"1em"}},"Find local pickupgames and start playing!",r.a.createElement("br",null)," Sign up below!"))),r.a.createElement(p.a,null,r.a.createElement(d.a,{columns:2},r.a.createElement(d.a.Row,{style:{marginTop:"100px"}},r.a.createElement(d.a.Column,null,r.a.createElement("img",{src:J.a,alt:"Basketball legend Kobe Bryant",style:{maxWidth:"65%",maxHeight:"65%"}})),r.a.createElement(d.a.Column,null,r.a.createElement(B,{colorScheme:t})))))),r.a.createElement(u.a,{maxWidth:767},r.a.createElement(m.a,{inverted:!0,textAlign:"center",style:{minHeight:250,padding:"1em 0em"},vertical:!0},r.a.createElement(p.a,{text:!0},r.a.createElement(f.a,{as:"h1",inverted:!0,style:{fontWeight:"normal",marginBottom:0,marginTop:"2em"}},"Pickupgame finder",r.a.createElement(f.a.Subheader,{style:{fontWeight:"normal",marginTop:"0.5em"}},"Find local pickupgames and start playing!")))),r.a.createElement(p.a,null,r.a.createElement(m.a,{style:{marginTop:"30px"},className:n},r.a.createElement(F,{colorScheme:t,textColor:"dark"===t?"white":"black"})),r.a.createElement(g.a,{horizontal:!0},r.a.createElement("p",{style:{color:a}},"OR")),r.a.createElement(B,{colorScheme:t}))))},Y=a(72),X=a(325),K=a(309),Q=a.n(K),$=function(e){var t=e.cluster,a=e.zoom,n=t.properties;return r.a.createElement(Y.b,{latitude:n.location.lat,longitude:n.location.long},r.a.createElement("div",{onClick:function(){a(t)},id:"game"},r.a.createElement("img",{src:Q.a,alt:"basketballgame here",style:{height:"25px",width:"25px"}})))},ee=function(e){var t=e.clusters,a=e.zoom;return t.map((function(e){var t=Object(R.a)(e.geometry.coordinates,2),n=t[0],c=t[1];return e.properties.cluster?r.a.createElement(Y.b,{key:e.id,latitude:c,longitude:n},r.a.createElement("div",{onClick:function(){return a(e)},style:{color:"black",backgroundColor:"#cc5500",borderRadius:"50%",width:"25px",height:"25px",textAlign:"center",lineHeight:"25px"}},e.properties.point_count)):r.a.createElement($,{key:e.properties.id,cluster:e,zoom:a})}))},te=a(535),ae=a(93),ne=a(538),re=function(e){var t=e.gameInfo,a=e.setSelected,c=e.prevSelected,o=e.setPrevSelected,l=e.joinGame,i=e.colorScheme,s=Object(n.useState)(!0),u=Object(R.a)(s,2),m=u[0],p=u[1],d={textColor:"dark"===i?"white":"black",backgroundColor:"dark"===i?"#192430":"",inverted:"dark"===i},h=null!==c,b=t.endTime.slice(0,10),E=t.endTime.slice(11,16);return r.a.createElement(te.a,{open:m,onClose:function(){p(!1),o(null),a(null)}},r.a.createElement(te.a.Header,{style:{backgroundColor:d.backgroundColor}},h&&r.a.createElement(ae.a,{inverted:d.inverted,link:!0,name:"arrow left",onClick:function(){a(c)}})),r.a.createElement(te.a.Content,{style:{backgroundColor:d.backgroundColor}},r.a.createElement(P.a,{floated:"right",primary:!0,onClick:function(){return l(t.id)}},"Join"),r.a.createElement(te.a.Description,null,r.a.createElement(f.a,{style:{color:d.textColor}},"Game by ",t.owner.username),r.a.createElement("p",{style:{color:d.textColor}},t.desc),r.a.createElement("p",{style:{color:d.textColor}},"Participants: (",t.participants.length,"/",t.maxParticipants,")"),r.a.createElement(ne.a,{bulleted:!0},t.participants.map((function(e){return r.a.createElement(ne.a.Item,{key:e.id,style:{color:d.textColor}},e.username)}))),r.a.createElement(g.a,null),r.a.createElement("p",{style:{color:d.textColor}},"Game ends at: ",b," ",E," GMT"))))},ce=a(539),oe=function(e){var t=e.clusterInfo,a=e.supercluster,c=e.setSelected,o=e.setPrevSelected,l=e.colorScheme,i=Object(n.useState)(!0),s=Object(R.a)(i,2),u=s[0],m=s[1],p=a.getLeaves(t.id),d={textColor:"dark"===l?"white":"black",backgroundColor:"dark"===l?"#192430":""};return r.a.createElement(te.a,{open:u,onClose:function(){m(!1),o(null),c(null)}},r.a.createElement(te.a.Header,{style:{backgroundColor:d.backgroundColor,color:d.textColor}},"Games in this location"),r.a.createElement(te.a.Content,{style:{backgroundColor:d.backgroundColor}},p.map((function(e,a){return r.a.createElement(ce.a,{style:{backgroundColor:d.backgroundColor},fluid:!0,onClick:function(){o(t),c(e)},key:e.properties.id},r.a.createElement(ce.a.Content,null,r.a.createElement(ce.a.Header,{style:{color:d.textColor}},"Game ",a),r.a.createElement(ce.a.Meta,{style:{color:d.textColor}},"Created by ",e.properties.owner.username),r.a.createElement(ce.a.Description,{style:{color:d.textColor}},e.properties.desc)))}))))},le=function(e){var t=e.selectedCluster,a=e.prevSelected,n=e.setSelected,c=e.setPrevSelected,o=e.joinGame,l=e.supercluster,i=e.colorScheme;return t.properties.cluster?r.a.createElement(oe,{clusterInfo:t,supercluster:l,setSelected:n,setPrevSelected:c,colorScheme:i}):r.a.createElement(re,{gameInfo:t.properties,setSelected:n,prevSelected:a,setPrevSelected:c,joinGame:o,colorScheme:i})},ie=a(542),se=a(537),ue=Object(l.b)((function(e){return{colorScheme:e.colorScheme,user:e.user}}),{logOut:function(){return function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedInUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t="dark"===e.colorScheme?"#141d26":"#0E6EB8";return r.a.createElement(ie.a,{borderless:!0,size:"large",style:{backgroundColor:t}},r.a.createElement(ie.a.Item,null,r.a.createElement(i.b,{to:"/",style:{color:"white"}},"Home")),r.a.createElement(ie.a.Menu,{position:"right"},r.a.createElement(se.a,{item:!0,style:{color:"white"},text:e.user.username},r.a.createElement(se.a.Menu,{style:{backgroundColor:t}},r.a.createElement(se.a.Item,null,r.a.createElement(i.b,{to:"/profile",style:{color:"white"}},"Profile")),r.a.createElement(se.a.Item,{onClick:function(){return e.logOut()},style:{color:"white"}},r.a.createElement("p",{style:{color:"white"}},"Logout"))))))})),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GAMES":return t.data;case"ADD_GAME":return e.concat(t.data);case"ADD_PLAYER":var a=e.find((function(e){return e.id===t.gameId}));return a.participants=a.participants.concat(t.user),e.map((function(e){return e.id===t.gameId?a:e}));default:return e}},pe=Object(l.b)((function(e){return{location:e.location,colorScheme:e.colorScheme}}),{createGame:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.create(e);case 3:n=t.sent,a({type:"ADD_GAME",data:n}),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t="dark"===e.colorScheme?"inputDark":"",a="dark"===e.colorScheme?"white":"black",c="dark"===e.colorScheme?"segmentDarkest":"",o=e.radioValue,l=e.setRadioValue,i=e.location,s=e.latestClick,u=e.setNewGameLocation;Object(n.useEffect)((function(){u("curr"===o?i:s)}),[s,i,u,o]);var p=function(){e.viewport?(e.setFormVisible(!1),e.setViewport(Object(E.a)({},e.viewport,{height:"100vh"}))):e.setFormVisible(!1)},d=function(){var t=Object(v.a)(b.a.mark((function t(a,n){var r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.setSubmitting,c={durationMins:a.duration,location:e.newGameLocation,desc:a.description,maxParticipants:a.participants},t.prev=2,t.next=5,e.createGame(c);case 5:z.a.info("Created a game for ".concat(a.participants," players!"),{position:z.a.POSITION.TOP_CENTER}),r(!1),l("curr"),e.setNewGameLocation({lat:0,lng:0}),e.setLatestClick({lat:0,lng:0}),p(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log("Exception",t.t0);case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(m.a,{className:c},r.a.createElement("div",{style:{position:"absolute",right:"10px",top:"10px",zIndex:"10"},onClick:p},r.a.createElement(ae.a,{name:"close",size:"large",inverted:"dark"===e.colorScheme})),r.a.createElement(M.b,{initialValues:{duration:"",description:"",participants:10},validationSchema:_.b({duration:_.a().integer().min(1,"The game must go on for at least a minute").max(180,"The game cannot be longer than 180 minutes").required(),description:_.c().min(5,"Must be at least 5 characters").max(140,"Must be 140 characters or less").required(),participants:_.a().required().integer().min(1,"The game must have at least one player").max(30,"The game cannot have more than 30 players")}),onSubmit:d},(function(n){return r.a.createElement(M.a,{className:"ui form"},r.a.createElement(f.a,{as:"h2",style:{color:a}},"Start a game!"),r.a.createElement(U.a.Group,{inline:!0},r.a.createElement("label",{style:{color:a}},"Location"),r.a.createElement(U.a.Radio,{value:"select",checked:"select"===o,onChange:function(){return l("select")}}),r.a.createElement("label",{style:{color:a}},"Select from map"),r.a.createElement(U.a.Radio,{value:"curr",checked:"curr"===o,onChange:function(){return l("curr")}}),r.a.createElement("label",{style:{color:a}},"Your location")),r.a.createElement("p",{style:{color:a}},"lat: ",e.newGameLocation.lat.toFixed(4)),r.a.createElement("p",{style:{color:a}},"long: ",e.newGameLocation.lng.toFixed(4)),r.a.createElement(V,{label:"Duration",name:"duration",placeholder:"Duration in mins (1-180)",type:"number",inputClass:t,textColor:a,id:"duration"}),r.a.createElement(V,{label:"Description",name:"description",placeholder:"Description (5-140 chars)",type:"text",inputClass:t,textColor:a,id:"description"}),r.a.createElement(V,{label:"Maximum players",name:"participants",placeholder:"Max amount of participants (1-30)",type:"number",inputClass:t,textColor:a,id:"participants"}),r.a.createElement(P.a,{type:"submit",primary:!0,fluid:!0,loading:n.isSubmitting,disabled:n.isSubmitting,size:"large",id:"gamecreation-button"},"Create a game"))})))})),de=function(e){var t=e.location;return r.a.createElement(Y.b,{latitude:t.lat,longitude:t.lng},r.a.createElement(ae.a,{name:"map marker alternate",color:"red",size:"big"}))},fe=function(){return r.a.createElement(p.a,null,r.a.createElement(W.a,{icon:!0,warning:!0},r.a.createElement(ae.a,{name:"location arrow"}),r.a.createElement(W.a.Content,null,r.a.createElement(W.a.Header,null,"Pls, give location"),"Please accept or deny the use of your location to continue using the app")))},ge=Object(l.b)((function(e){return{points:e.games.map((function(e){return{type:"Feature",properties:Object(E.a)({cluster:!1},e),geometry:{type:"Point",coordinates:[e.location.long,e.location.lat]}}})),location:e.location,colorScheme:e.colorScheme}}),{addPlayer:function(e,t){return{type:"ADD_PLAYER",user:e,gameId:t}}})((function(e){var t=Object(n.useState)({}),a=Object(R.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),i=Object(R.a)(l,2),s=i[0],m=i[1],p=Object(n.useState)(null),f=Object(R.a)(p,2),g=f[0],h=f[1],y=Object(n.useState)({lat:0,lng:0}),k=Object(R.a)(y,2),w=k[0],x=k[1],O=Object(n.useState)(!1),C=Object(R.a)(O,2),S=C[0],j=C[1],I=Object(n.useState)({lat:0,lng:0}),T=Object(R.a)(I,2),N=T[0],G=T[1],A=Object(n.useState)("curr"),D=Object(R.a)(A,2),M=D[0],_=D[1],H="dark"===e.colorScheme?"mapbox://styles/ogrousu/ck6g74as70kw51io8h0ceo6h3":"mapbox://styles/ogrousu/ckae1dzbv0fvc1ilbhpvgy23t";Object(n.useEffect)((function(){o({latitude:null===e.location?0:e.location.lat,longitude:null===e.location?0:e.location.lng,zoom:null===e.location?0:12,height:"100vh",width:"100vw"})}),[e.location]);var V=Object(n.useRef)(),B=V.current?V.current.getMap().getBounds().toArray().flat():null,U=Object(X.a)({points:e.points,zoom:c.zoom,bounds:B,options:{radius:30,maxZoom:15}}),W=U.clusters,F=U.supercluster,q=function(){var t=Object(v.a)(b.a.mark((function t(a){var n,r,c,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.create({game:a});case 3:n=t.sent,z.a.info("Joined the game successfully",{position:z.a.POSITION.TOP_CENTER}),e.addPlayer(n.user,n.game),r=s.properties.participants.concat(n.user),c=Object(E.a)({},s.properties,{participants:r}),o={geometry:s.geometry,properties:c,type:s.type},m(o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),z.a.warn(t.t0.response.data.error,{position:z.a.POSITION.TOP_CENTER});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return null===e.location?r.a.createElement(fe,null):r.a.createElement("div",null,!S&&r.a.createElement(P.a,{primary:!0,style:{position:"absolute",top:"70px",right:"10px",zIndex:"9"},onClick:function(){window.screen.width>767?j(!0):(j(!0),o(Object(E.a)({},c,{height:"50vh"})))}},"New Game"),S&&r.a.createElement("div",null,r.a.createElement(u.a,{minWidth:768},r.a.createElement(d.a,{style:{position:"absolute",top:"15px",right:"0",marginTop:"35px",marginRight:"10px",zIndex:"9"}},r.a.createElement(d.a.Column,null,r.a.createElement(pe,{latestClick:w,setLatestClick:x,setFormVisible:j,newGameLocation:N,setNewGameLocation:G,radioValue:M,setRadioValue:_})))),r.a.createElement(u.a,{maxWidth:767},r.a.createElement("div",{style:{position:"fixed",bottom:"0",width:"100%",maxHeight:"50vh",overflow:"auto",zIndex:"9"}},r.a.createElement(pe,{latestClick:w,setLatestClick:x,setFormVisible:j,newGameLocation:N,setNewGameLocation:G,radioValue:M,setRadioValue:_,viewport:c,setViewport:o})))),r.a.createElement(Y.c,Object.assign({getCursor:function(e){var t=e.isDragging;return"select"===M&&S?"crosshair":t?"grabbing":"grab"},maxZoom:15,ref:V},c,{mapboxApiAccessToken:"pk.eyJ1Ijoib2dyb3VzdSIsImEiOiJjazZnNXlhbXAxczQ1M25tdmw1ZzcyeTM2In0.C5qgovZhdjICee5q6Zt_sg",mapStyle:H,onViewportChange:function(e){o(e)},onClick:function(e){"select"===M&&S&&x({lat:e.lngLat[1],lng:e.lngLat[0]})}}),r.a.createElement(ue,null),S&&r.a.createElement(de,{location:N}),r.a.createElement(ee,{clusters:W,zoom:function(e){var t=e.id?Math.min(F.getClusterExpansionZoom(e.id),15):15,a=Object(R.a)(e.geometry.coordinates,2),n=a[0],r=a[1];m(e),o(Object(E.a)({},c,{latitude:r,longitude:n,zoom:t,transitionInterpolator:new Y.a({speed:1}),transitionDuration:"auto"}))}}),s&&r.a.createElement(le,{selectedCluster:s,prevSelected:g,setSelected:m,setPrevSelected:h,joinGame:q,supercluster:F,colorScheme:e.colorScheme})))})),he=function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://ipapi.co/json/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCATION":return t.location;default:return e}},Ee=function(e){return window.localStorage.setItem("colorScheme",e),{type:"CHANGE_COLOR",colorScheme:e}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COLOR":return t.colorScheme;default:return e}},ye=(a(518),a(519),a(66)),ke=(a(520),a(11)),we=a(10),xe=a(22),Oe=a(20),Ce=a(23),Se=a(326),je=a(319),Ie=a.n(je),Te=a(320),Ne=a.n(Te),Ge=a(321),Le=a.n(Ge),Ae=a(322),De=a.n(Ae),Pe=function(e){function t(){return Object(ke.a)(this,t),Object(xe.a)(this,Object(Oe.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(we.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ye.d,null,r.a.createElement(ye.c,{index:0},r.a.createElement(Se.a,{wrapped:!0,src:Ie.a,as:"a",href:"http://www.freepik.com"}),r.a.createElement("p",null,"Designed by upklyak")),r.a.createElement(ye.c,{index:1},r.a.createElement(Se.a,{wrapped:!0,src:Ne.a})),r.a.createElement(ye.c,{index:2},r.a.createElement(Se.a,{wrapped:!0,src:Le.a})),r.a.createElement(ye.c,{index:3},r.a.createElement(Se.a,{wrapped:!0,src:De.a}))),r.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},this.props.current<3&&r.a.createElement(ye.a,{className:"ui massive icon circular basic inverted button"},r.a.createElement(ae.a,{name:"arrow right"})),3===this.props.current&&r.a.createElement(P.a,{className:"ui massive icon green basic circular inverted",onClick:this.props.closeModal},r.a.createElement(ae.a,{name:"check"}))))}}]),t}(r.a.Component),ze=Object(ye.e)(Pe,(function(e){return{current:e.currentSlide}})),Me=Object(l.b)((function(e){return{user:e.user}}),{disableIntro:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.update(Object(E.a)({},e,{showIntro:!1}));case 3:n=t.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(n)),a({type:"DISABLE_INTRO"}),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.disableIntro,c=Object(n.useState)(!0),o=Object(R.a)(c,2),l=o[0],i=o[1],s=function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!1),a(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(te.a,{basic:!0,open:l,centered:!1,closeOnDimmerClick:!1},r.a.createElement(ye.b,{naturalSlideWidth:1,naturalSlideHeight:.6,totalSlides:4},r.a.createElement(ze,{closeModal:s})))})),_e=a(532),Re=a(323),He=a.n(Re),Ve=Object(l.b)((function(e){return{user:e.user,colorScheme:e.colorScheme}}),{changeColor:Ee})((function(e){var t=e.user,a=e.colorScheme,c=e.changeColor,o=Object(n.useState)("created"),l=Object(R.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(null),h=Object(R.a)(u,2),E=h[0],y=h[1],k=Object(n.useState)(null),w=Object(R.a)(k,2),x=w[0],O=w[1],C="dark"===a?"segmentDarkest":"",S="dark"===a?"white":"black",j="dark"===a?"#192430":"";Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(b.a.mark((function e(){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getByOwner(t.id);case 2:return a=e.sent,y(a.reverse()),e.next=6,L.getByUser(t.id);case 6:n=e.sent,O(n.reverse());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("haetaan pelej\xe4"),function(){e.apply(this,arguments)}()}),[t.id]);return r.a.createElement("div",null,r.a.createElement(ue,null),r.a.createElement(p.a,{text:!0,style:{marginTop:"5em"}},r.a.createElement(m.a,{className:C},r.a.createElement(d.a,{columns:3},r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Column,null,r.a.createElement(Se.a,{src:He.a,circular:!0,size:"small"})),r.a.createElement(d.a.Column,null,r.a.createElement(f.a,{size:"large",style:{position:"absolute",bottom:"0px",color:S}},t.username)),r.a.createElement(d.a.Column,{textAlign:"right"},r.a.createElement("p",{style:{color:S}},"Dark"),r.a.createElement(_e.a,{toggle:!0,checked:"dark"===a,onChange:function(){c("light"===a?"dark":"light")},className:"toggle"})))),r.a.createElement(g.a,null),r.a.createElement(ie.a,{pointing:!0,secondary:!0,inverted:"dark"===a},r.a.createElement(ie.a.Item,{name:"Created games",active:"created"===i,onClick:function(){return s("created")}}),r.a.createElement(ie.a.Item,{name:"Game history",active:"history"===i,onClick:function(){return s("history")}})),r.a.createElement("div",null,E&&"created"===i&&r.a.createElement("div",null,E.map((function(e){return r.a.createElement(ce.a,{fluid:!0,key:e.id,style:{backgroundColor:j}},r.a.createElement(ce.a.Content,null,r.a.createElement(ce.a.Meta,{style:{color:S}},"Game created by ",e.owner.username),r.a.createElement(ce.a.Description,{style:{color:S}},e.desc)))}))),x&&"history"===i&&r.a.createElement("div",null,x.map((function(e){return r.a.createElement(ce.a,{fluid:!0,key:e.game.id,style:{backgroundColor:j}},r.a.createElement(ce.a.Content,null,r.a.createElement(ce.a.Meta,{style:{color:S}},"Game created by ",e.game.owner.username),r.a.createElement(ce.a.Description,{style:{color:S}},e.game.desc)))})))))))}));z.a.configure({autoClose:3500,hideProgressBar:!0});var Be=Object(l.b)((function(e){return{user:e.user,colorScheme:e.colorScheme}}),{initializeGames:function(){return function(){var e=Object(v.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getAllActive();case 2:a=e.sent,t({type:"INIT_GAMES",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},stayLoggedIn:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T.setToken(e.token),L.setToken(e.token),O.setToken(e.token),a({type:"STAY_LOGGED_IN",user:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeLocation:function(){return function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude};t({type:"CHANGE_LOCATION",location:a})}),(function(e){console.log("failed to get location",e),he().then((function(e){console.log("response",e);var a={lat:e.latitude,lng:e.longitude};t({type:"CHANGE_LOCATION",location:a})}))})):(console.log("geolocation not supported in this browser"),he().then((function(e){var a={lat:e.latitude,lng:e.longitude};t({type:"CHANGE_LOCATION",location:a})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeColor:Ee})((function(e){var t=e.initializeGames,a=e.stayLoggedIn,c=e.changeLocation,o=e.changeColor,l=e.colorScheme;return Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);a(t)}}),[a]),Object(n.useEffect)((function(){c()}),[c]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("colorScheme");o(e||"light")}),[o]),Object(n.useEffect)((function(){"dark"===l?document.body.classList.add("bodyDark"):"light"===l&&document.body.classList.remove("bodyDark")}),[l]),null===e.user?r.a.createElement(Z,{colorScheme:e.colorScheme}):e.user.showIntro?r.a.createElement(Me,null):r.a.createElement(i.a,{basename:"/"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/profile"},r.a.createElement(Ve,null)),r.a.createElement(s.a,{path:"/"},r.a.createElement(ge,null))))})),Ue=a(123),We=a(324),Fe=Object(Ue.c)({games:me,user:D,location:be,colorScheme:ve}),qe=Object(Ue.d)(Fe,Object(Ue.a)(We.a));o.a.render(r.a.createElement(l.a,{store:qe},r.a.createElement(Be,null)),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.84cdae91.chunk.js.map