(window["webpackJsonppick-up-game-finder"]=window["webpackJsonppick-up-game-finder"]||[]).push([[0],{193:function(e,t,a){e.exports=a.p+"static/media/kobe.4b4fdbac.jpg"},195:function(e,t,a){e.exports=a.p+"static/media/bball.527662f6.svg"},209:function(e,t,a){e.exports=a(362)},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),o=a.n(c),l=a(31),i=a(378),u=a(381),s=a(16),p=a.n(s),m=a(24),d=a(12),f=a(38),g=a.n(f),v="";v="https://pickupgamefinder.herokuapp.com";var b={create:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(v).concat("/api/users"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h="";h="https://pickupgamefinder.herokuapp.com";var E={login:function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(h).concat("/api/login"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=null,w="";w="https://pickupgamefinder.herokuapp.com";var y={getAllActive:function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w).concat("/api/games","/active"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:O}},e.next=3,g.a.post("".concat(w).concat("/api/games"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){O="bearer ".concat(e)}},k=null,j="";j="https://pickupgamefinder.herokuapp.com";var x={setToken:function(e){k="bearer ".concat(e)},create:function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:k}},e.next=3,g.a.post("".concat(j).concat("/api/players"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(e,t){return function(){var a=Object(m.a)(p.a.mark((function a(n){var r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.login({username:e,password:t});case 3:r=a.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(r)),y.setToken(r.token),x.setToken(r.token),n({type:"LOGIN",user:r}),a.next=13;break;case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",a.t0.response);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"STAY_LOGGED_IN":return t.user;case"LOGOUT":return null;default:return e}},I=a(379),S=a(373),T=a(375),A=a(376),G=a(30),P=Object(l.b)(null,{login:C})((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),f=s[0],g=s[1],v=Object(n.useState)(""),h=Object(d.a)(v,2),E=h[0],O=h[1],w=Object(n.useState)(""),y=Object(d.a)(w,2),k=y[0],j=y[1],x=function(){var t=Object(m.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,n={username:c,name:f,password:E},t.next=5,b.create(n);case 5:o(""),g(""),O(""),j(""),e.login(n.username,n.password),G.a.info("Welcome ".concat(n.username),{position:G.a.POSITION.TOP_CENTER}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),j(t.t0.response.data.error);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(i.a,null,r.a.createElement(i.a.Column,null,r.a.createElement(I.a,{style:{padding:"20px",backgroundColor:"#1c2836"}},r.a.createElement(S.a,{onSubmit:x},r.a.createElement(u.a,{as:"h2",inverted:!0},"Sign up"),""!==k&&r.a.createElement(T.a,null,k),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},"Username"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"username",style:{color:"white",backgroundColor:"#243447"},type:"text",placeholder:"Username (3-15 characters)",value:c,onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},"Name"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"name",style:{color:"white",backgroundColor:"#243447"},type:"text",placeholder:"Name (2-30 characters)",value:f,onChange:function(e){var t=e.target;return g(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},"Password"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"password",style:{color:"white",backgroundColor:"#243447"},type:"password",placeholder:"Password (min. 5 characters)",value:E,onChange:function(e){var t=e.target;return O(t.value)}}))),r.a.createElement(A.a,{color:"blue",fluid:!0,size:"large",id:"accountCreation-button"},"Sign up")))))})),L=Object(l.b)(null,{login:C})((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(d.a)(l,2),s=i[0],f=i[1],g=Object(n.useState)(""),v=Object(d.a)(g,2),b=v[0],h=v[1],E=function(){var t=Object(m.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.login(c,s);case 3:(n=t.sent)?(f(""),h(n.data.error)):G.a.info("Welcome ".concat(c),{position:G.a.POSITION.TOP_CENTER});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(S.a,{onSubmit:E},r.a.createElement(u.a,{as:"h2",inverted:!0},"Login"),r.a.createElement(S.a.Group,{inline:!0,widths:"equal"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"login-username",style:{color:"white",backgroundColor:"#243447"},type:"text",placeholder:"Username",value:c,onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"login-password",style:{color:"white",backgroundColor:"#243447"},type:"password",placeholder:"Password",value:s,onChange:function(e){var t=e.target;return f(t.value)}}))),r.a.createElement(A.a,{color:"blue",id:"login-button"},"Login")),""!==b&&r.a.createElement(T.a,null,b))})),_=a(193),D=a.n(_),z=function(){return r.a.createElement(i.a,{columns:2},r.a.createElement(i.a.Row,{style:{paddingBottom:"20px",paddingTop:"50px"}},r.a.createElement(i.a.Column,null),r.a.createElement(i.a.Column,null,r.a.createElement(L,null))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(u.a,{as:"h1",inverted:!0},"Pickupgame finder",r.a.createElement(u.a.Subheader,null,"Find local pickupgames and start balling")),r.a.createElement("img",{src:D.a,alt:"Basketball legend Kobe Bryant",style:{maxWidth:"60%",maxHeight:"60%"}})),r.a.createElement(i.a.Column,null,r.a.createElement(P,null))))},M=a(68),R=a(195),J=a.n(R),U=function(e){var t=e.game,a=e.setSelected;return r.a.createElement(M.a,{latitude:t.location.lat,longitude:t.location.long},r.a.createElement("button",{style:{border:"0",background:"transparent"},onClick:function(){return a(t)}},r.a.createElement("img",{src:J.a,alt:"basketballgame here",style:{height:"25px",width:"25px"}})))},H=a(374),B=function(e){var t=e.selectedGame,a=e.setSelected,n=e.joinGame,c=t.endTime.slice(0,10),o=t.endTime.slice(11,16);return r.a.createElement(M.b,{latitude:t.location.lat,longitude:t.location.long,onClose:function(){return a(null)},offsetLeft:18,offsetTop:-7},"Participants (",t.participants.length,"/",t.maxParticipants,")",r.a.createElement(A.a,{onClick:function(){return n(t.id)},style:{marginLeft:"20px"}},"Join"),r.a.createElement(H.a,{bulleted:!0},t.participants.map((function(e){return r.a.createElement(H.a.Item,{key:e},e)}))),r.a.createElement("p",null,"Game ends: ",c," ",o," GMT (....minutes left)"),r.a.createElement("p",null,t.desc))},Y=a(377),Z=Object(l.b)(null,{logOut:function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedInUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return r.a.createElement(Y.a,{inverted:!0,style:{marginBottom:"0"}},r.a.createElement(Y.a.Item,{name:"home"},"Home"),r.a.createElement(Y.a.Item,{position:"right",name:"settings",onClick:function(){return e.logOut()}},"Logout"))})),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GAMES":return t.data;case"ADD_GAME":return e.concat(t.data);case"ADD_PLAYER":var a=e.find((function(e){return e.id===t.gameId}));return a.participants=a.participants.concat(t.userId),e.map((function(e){return e.id===t.gameId?a:e}));default:return e}},W=a(49),V=Object(l.b)((function(e){return{location:e.location}}),{createGame:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.create(e);case 3:n=t.sent,a({type:"ADD_GAME",data:n}),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),f=s[0],g=s[1],v=Object(n.useState)(""),b=Object(d.a)(v,2),h=b[0],E=b[1],O=Object(n.useState)(""),w=Object(d.a)(O,2),y=w[0],k=w[1],j=function(){var t=Object(m.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={durationMins:c,location:e.location,desc:f,maxParticipants:h},t.next=4,e.createGame(n);case 4:(r=t.sent)?k(r.data.error):(G.a.info("Successfully created a game for ".concat(h," people in your location"),{position:G.a.POSITION.TOP_CENTER}),o(""),g(""),E(10),k(""),e.toggler());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(i.a,{style:{position:"absolute",top:"0",right:"0",marginTop:"35px",marginRight:"10px"}},r.a.createElement(i.a.Column,null,r.a.createElement(I.a,{style:{padding:"20px",backgroundColor:"#141d26"}},r.a.createElement(A.a,{size:"mini",onClick:e.toggler,style:{border:"0",background:"transparent",position:"absolute",right:"0",top:"0"}},r.a.createElement(W.a,{name:"close",size:"small",inverted:!0})),r.a.createElement(S.a,{onSubmit:j},r.a.createElement(u.a,{as:"h2",inverted:!0},"Start a game!"),""!==y&&r.a.createElement(T.a,null,y),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},"Duration"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"duration",style:{color:"white",backgroundColor:"#243447"},type:"number",placeholder:"Duration in mins (1-180)",value:c,onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},"Description"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"description",style:{color:"white",backgroundColor:"#243447"},type:"text",placeholder:"Description (5-140 chars)",value:f,onChange:function(e){var t=e.target;return g(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:"white"}},"Maximum amount of participants"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"participants",style:{color:"white",backgroundColor:"#243447"},type:"number",placeholder:"Max amount of participants (1-30)",value:h,onChange:function(e){var t=e.target;return E(t.value)}}))),r.a.createElement(A.a,{color:"blue",fluid:!0,size:"large",id:"gamecreation-button"},"Create a game")))))})),X=a(372),F=Object(l.b)((function(e){return{games:e.games,location:e.location}}),{addPlayer:function(e,t){return{type:"ADD_PLAYER",userId:e,gameId:t}}})((function(e){var t=Object(n.useState)({latitude:0,longitude:0,zoom:3,height:"100vh",width:"100vw"}),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),i=Object(d.a)(l,2),u=i[0],s=i[1],f=Object(n.useState)(!1),g=Object(d.a)(f,2),v=g[0],b=g[1],h=function(){b(!v)};Object(n.useEffect)((function(){o({latitude:null===e.location?0:e.location.lat,longitude:null===e.location?0:e.location.lng,zoom:null===e.location?0:12,height:"100vh",width:"100vw"})}),[e.location]);var E=function(){var t=Object(m.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.create({game:a});case 3:n=t.sent,G.a.info("Joined the game successfully",{position:G.a.POSITION.TOP_CENTER}),e.addPlayer(n.user,n.game),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),G.a.warn(t.t0.response.data.error,{position:G.a.POSITION.TOP_CENTER});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return null===e.location?r.a.createElement(X.a,null,r.a.createElement(T.a,{icon:!0,warning:!0},r.a.createElement(W.a,{name:"location arrow"}),r.a.createElement(T.a.Content,null,r.a.createElement(T.a.Header,null,"Pls, give location"),"Please accept or deny the use of your location to continue using the app"))):r.a.createElement(M.c,Object.assign({},c,{mapboxApiAccessToken:"pk.eyJ1Ijoib2dyb3VzdSIsImEiOiJjazZnNXlhbXAxczQ1M25tdmw1ZzcyeTM2In0.C5qgovZhdjICee5q6Zt_sg",mapStyle:"mapbox://styles/ogrousu/ck6g74as70kw51io8h0ceo6h3",onViewportChange:function(e){o(e)},onClick:function(){return s(null)}}),r.a.createElement(Z,null),v&&r.a.createElement(V,{toggler:h}),!v&&r.a.createElement(A.a,{primary:!0,style:{position:"absolute",top:"50px",right:"10px"},onClick:h},"New Game"),e.games.map((function(e){return r.a.createElement(U,{key:e.id,game:e,setSelected:s})})),u&&r.a.createElement(B,{selectedGame:u,setSelected:s,joinGame:E}))})),K=function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://ipapi.co/json/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCATION":return t.location;default:return e}};a(361);G.a.configure({autoClose:3500,hideProgressBar:!0});var $=Object(l.b)((function(e){return{user:e.user}}),{initializeGames:function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAllActive();case 2:a=e.sent,t({type:"INIT_GAMES",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},stayLoggedIn:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y.setToken(e.token),x.setToken(e.token),a({type:"STAY_LOGGED_IN",user:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeLocation:function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude};t({type:"CHANGE_LOCATION",location:a})}),(function(e){console.log("failed to get location",e),K().then((function(e){console.log("response",e);var a={lat:e.latitude,lng:e.longitude};t({type:"CHANGE_LOCATION",location:a})}))})):(console.log("geolocation not supported in this browser"),K().then((function(e){var a={lat:e.latitude,lng:e.longitude};t({type:"CHANGE_LOCATION",location:a})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.initializeGames,a=e.stayLoggedIn,c=e.changeLocation;return Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);a(t)}}),[a]),Object(n.useEffect)((function(){c()}),[c]),null===e.user?r.a.createElement(X.a,null,r.a.createElement(z,null)):r.a.createElement("div",null,r.a.createElement(F,null))})),ee=a(69),te=a(197),ae=Object(ee.c)({games:q,user:N,location:Q}),ne=Object(ee.d)(ae,Object(ee.a)(te.a));o.a.render(r.a.createElement(l.a,{store:ne},r.a.createElement($,null)),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.b4784c38.chunk.js.map