(window["webpackJsonppick-up-game-finder"]=window["webpackJsonppick-up-game-finder"]||[]).push([[0],{193:function(e,t,n){e.exports=n.p+"static/media/kobe.4b4fdbac.jpg"},208:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(34),o=n.n(c),u=n(30),i=n(380),l=n(377),s=n(22),p=n.n(s),m=n(25),f=n(12),g=n(37),d=n.n(g),b="";b="https://pickupgamefinder.herokuapp.com";var v={create:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(b).concat("/api/users"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h="";h="https://pickupgamefinder.herokuapp.com";var O={login:function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("".concat(h).concat("/api/login"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=null,w="";w="https://pickupgamefinder.herokuapp.com";var j={getAllActive:function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat(w).concat("/api/games","/active"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,d.a.post("".concat(w).concat("/api/games"),t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)}},k=null,y="";y="https://pickupgamefinder.herokuapp.com";var x={setToken:function(e){k="bearer ".concat(e)},create:function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:k}},e.next=3,d.a.post("".concat(y).concat("/api/players"),t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(e,t){return function(){var n=Object(m.a)(p.a.mark((function n(a){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.login({username:e,password:t});case 3:r=n.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(r)),j.setToken(r.token),x.setToken(r.token),a({type:"LOGIN",user:r}),n.next=13;break;case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",n.t0.response);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"STAY_LOGGED_IN":return t.user;case"LOGOUT":return null;default:return e}},C=n(378),T=n(372),G=n(374),N=n(375),A=n(38),L=Object(u.b)(null,{login:I})((function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),s=Object(f.a)(u,2),g=s[0],d=s[1],b=Object(a.useState)(""),h=Object(f.a)(b,2),O=h[0],E=h[1],w=Object(a.useState)(""),j=Object(f.a)(w,2),k=j[0],y=j[1],x=function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,a={username:c,name:g,password:O},t.next=5,v.create(a);case 5:o(""),d(""),E(""),y(""),e.login(a.username,a.password),A.a.info("Welcome ".concat(a.username),{position:A.a.POSITION.TOP_CENTER}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),y(t.t0.response.data.error);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(i.a,null,r.a.createElement(i.a.Column,null,r.a.createElement(C.a,{style:{padding:"20px"}},r.a.createElement(T.a,{onSubmit:x},r.a.createElement(l.a,{as:"h2",color:"blue"},"Sign up"),""!==k&&r.a.createElement(G.a,null,k),r.a.createElement(T.a.Input,{label:"Username",placeholder:"Username (3-15 characters)",value:c,name:"username",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(T.a.Input,{label:"Name",placeholder:"Name (2-30 characters)",value:g,name:"name",onChange:function(e){var t=e.target;return d(t.value)}}),r.a.createElement(T.a.Input,{label:"Password",placeholder:"Password (min. 5 characters)",value:O,type:"password",name:"password",onChange:function(e){var t=e.target;return E(t.value)}}),r.a.createElement(N.a,{color:"blue",fluid:!0,size:"large"},"Sign up")))))})),P=Object(u.b)(null,{login:I})((function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),i=Object(f.a)(u,2),l=i[0],s=i[1],g=Object(a.useState)(""),d=Object(f.a)(g,2),b=d[0],v=d[1],h=function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.login(c,l);case 3:(a=t.sent)?(s(""),v(a.data.error)):A.a.info("Welcome ".concat(c),{position:A.a.POSITION.TOP_CENTER});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(T.a,{onSubmit:h},r.a.createElement(T.a.Group,{inline:!0},r.a.createElement(T.a.Input,{icon:"user",iconPosition:"left",placeholder:"Username",name:"username",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(T.a.Input,{icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:function(e){var t=e.target;return s(t.value)}}),r.a.createElement(N.a,{color:"blue"},"Login")),""!==b&&r.a.createElement(G.a,null,b))})),z=n(193),_=n.n(z),D=function(){return r.a.createElement(i.a,{columns:2},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null),r.a.createElement(i.a.Column,{style:{padding:"50px"}},r.a.createElement(P,null))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,null,r.a.createElement(l.a,{size:"huge"},"Pickupgame finder",r.a.createElement(l.a.Subheader,null,"Find local pickupgames and start balling")),r.a.createElement("img",{src:_.a,alt:"Basketball legend Kobe Bryant",style:{maxWidth:"60%",maxHeight:"60%"}})),r.a.createElement(i.a.Column,null,r.a.createElement(L,null))))},M=n(68),U=function(e){var t=e.game,n=e.setSelected;return r.a.createElement(M.a,{latitude:t.location.lat,longitude:t.location.long},r.a.createElement("button",{style:{border:"0",background:"transparent"},onClick:function(){return n(t)}},r.a.createElement("img",{src:"/bball.svg",alt:"basketballgame here",style:{height:"25px",width:"25px"}})))},J=n(373),H=function(e){var t=e.selectedGame,n=e.setSelected,a=e.joinGame,c=t.endTime.slice(0,10),o=t.endTime.slice(11,16);return r.a.createElement(M.b,{latitude:t.location.lat,longitude:t.location.long,onClose:function(){return n(null)},offsetLeft:18,offsetTop:-7},"Participants (",t.participants.length,"/",t.maxParticipants,")",r.a.createElement(N.a,{onClick:function(){return a(t.id)},style:{marginLeft:"20px"}},"Join"),r.a.createElement(J.a,{bulleted:!0},t.participants.map((function(e){return r.a.createElement(J.a.Item,{key:e},e)}))),r.a.createElement("p",null,"Game ends: ",c," ",o," GMT (....minutes left)"),r.a.createElement("p",null,t.desc))},R=n(376),B=Object(u.b)(null,{logOut:function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedInUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return r.a.createElement(R.a,{inverted:!0,style:{marginBottom:"0"}},r.a.createElement(R.a.Item,{name:"home"},"Home"),r.a.createElement(R.a.Item,{position:"right",name:"settings",onClick:function(){return e.logOut()}},"Logout"))})),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GAMES":return t.data;case"ADD_GAME":return e.concat(t.data);default:return e}},W=Object(u.b)((function(e){return{location:e.location}}),{createGame:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.create(e);case 3:a=t.sent,n({type:"ADD_GAME",data:a}),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),s=Object(f.a)(u,2),g=s[0],d=s[1],b=Object(a.useState)(10),v=Object(f.a)(b,2),h=v[0],O=v[1],E=Object(a.useState)(""),w=Object(f.a)(E,2),j=w[0],k=w[1],y=function(){var t=Object(m.a)(p.a.mark((function t(n){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={durationMins:c,location:e.location,desc:g,maxParticipants:h},t.next=4,e.createGame(a);case 4:(r=t.sent)?k(r.data.error):(A.a.info("Succesfully created a game for ".concat(h," people in your location"),{position:A.a.POSITION.TOP_CENTER}),o(""),d(""),O(10),k(""),e.toggler());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(i.a,{style:{position:"absolute",top:"0",right:"0",zIndex:"999",marginTop:"35px",marginRight:"10px"}},r.a.createElement(i.a.Column,null,r.a.createElement(C.a,{style:{padding:"20px"}},r.a.createElement(N.a,{size:"mini",onClick:e.toggler},"x"),r.a.createElement(T.a,{onSubmit:y},r.a.createElement(l.a,{as:"h2",color:"blue"},"Start a game!"),""!==j&&r.a.createElement(G.a,null,j),r.a.createElement(T.a.Input,{type:"number",label:"Duration",placeholder:"Duration in minutes (1-180 mins)",value:c,name:"Duration",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(T.a.Input,{label:"Description",placeholder:"Description (5-140 characters)",value:g,name:"Description",onChange:function(e){var t=e.target;return d(t.value)}}),r.a.createElement(T.a.Input,{type:"number",label:"Maximum amount of participants",placeholder:"Max amount of participants (1-30 participants)",value:h,name:"maxParticipants",onChange:function(e){var t=e.target;return O(t.value)}}),r.a.createElement(N.a,{color:"blue",fluid:!0,size:"large"},"Create a game")))))})),q=Object(u.b)((function(e){return{games:e.games,location:e.location}}))((function(e){var t=Object(a.useState)({latitude:0,longitude:0,zoom:3,height:"100vh",width:"100vw"}),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(null),i=Object(f.a)(u,2),l=i[0],s=i[1],p=Object(a.useState)(!1),m=Object(f.a)(p,2),g=m[0],d=m[1],b=function(){d(!g)};Object(a.useEffect)((function(){o({latitude:null===e.location?0:e.location.lat,longitude:null===e.location?0:e.location.lng,zoom:null===e.location?0:12,height:"100vh",width:"100vw"})}),[e.location]);return r.a.createElement(M.c,Object.assign({},c,{mapboxApiAccessToken:"pk.eyJ1Ijoib2dyb3VzdSIsImEiOiJjazZnNXlhbXAxczQ1M25tdmw1ZzcyeTM2In0.C5qgovZhdjICee5q6Zt_sg",mapStyle:"mapbox://styles/ogrousu/ck6g74as70kw51io8h0ceo6h3",onViewportChange:function(e){o(e)},onClick:function(){return s(null)}}),r.a.createElement(B,null),g&&r.a.createElement(W,{toggler:b}),!g&&r.a.createElement(N.a,{primary:!0,style:{position:"absolute",top:"50px",right:"10px",zIndex:"999"},onClick:b},"New Game"),e.games.map((function(e){return r.a.createElement(U,{key:e.id,game:e,setSelected:s})})),l&&r.a.createElement(H,{selectedGame:l,setSelected:s,joinGame:function(e){x.create({game:e}),s(null)}}))})),V=function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("http://ip-api.com/json");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCATION":return t.location;default:return e}},Y=n(371);n(360);A.a.configure();var F=Object(u.b)((function(e){return{user:e.user}}),{initializeGames:function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getAllActive();case 2:n=e.sent,t({type:"INIT_GAMES",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},stayLoggedIn:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j.setToken(e.token),x.setToken(e.token),n({type:"STAY_LOGGED_IN",user:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeLocation:function(){return function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};t({type:"CHANGE_LOCATION",location:n})}),(function(e){console.log("failed to get location",e),V().then((function(e){var n={lat:e.lat,lng:e.lon};t({type:"CHANGE_LOCATION",location:n})}))})):(console.log("geolocation not supported in this browser"),V().then((function(e){var n={lat:e.lat,lng:e.lon};t({type:"CHANGE_LOCATION",location:n})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.initializeGames,n=e.stayLoggedIn,c=e.changeLocation;return Object(a.useEffect)((function(){t()}),[t]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);n(t)}}),[n]),Object(a.useEffect)((function(){c()}),[c]),null===e.user?r.a.createElement(Y.a,null,r.a.createElement(D,null)):r.a.createElement("div",null,r.a.createElement(q,null))})),K=n(69),Q=n(196),$=Object(K.c)({games:Z,user:S,location:X}),ee=Object(K.d)($,Object(K.a)(Q.a));o.a.render(r.a.createElement(u.a,{store:ee},r.a.createElement(F,null)),document.getElementById("root"))}},[[208,1,2]]]);
//# sourceMappingURL=main.1ab93af5.chunk.js.map