(window["webpackJsonppick-up-game-finder"]=window["webpackJsonppick-up-game-finder"]||[]).push([[0],{188:function(e,t,n){e.exports=n.p+"static/media/kobe.4b4fdbac.jpg"},202:function(e,t,n){e.exports=n(356)},356:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(26),o=n.n(c),u=n(28),l=n(374),i=n(376),s=n(10),p=n.n(s),m=n(20),f=n(25),g=n(33),d=n.n(g),b={create:function(){var e=Object(m.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/users",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},v={login:function(){var e=Object(m.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},h=null,O={getAllActive:function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat("/api/games","/active"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,d.a.post("/api/games",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){h="bearer ".concat(e)}},E=null,w={setToken:function(e){E="bearer ".concat(e)},create:function(){var e=Object(m.a)(p.a.mark(function e(t){var n,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},console.log("l\xe4htet\xe4\xe4n",t),e.next=4,d.a.post("/api/players",t,n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=function(e,t){return function(){var n=Object(m.a)(p.a.mark(function n(a){var r;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.login({username:e,password:t});case 3:r=n.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(r)),O.setToken(r.token),w.setToken(r.token),a({type:"LOGIN",user:r}),n.next=13;break;case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",n.t0.response);case 13:case"end":return n.stop()}},n,null,[[0,10]])}));return function(e){return n.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"STAY_LOGGED_IN":return t.user;case"LOGOUT":return null;default:return e}},y=n(375),k=n(369),I=n(371),S=n(372),C=n(35),T=Object(u.b)(null,{login:j})(function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),s=Object(f.a)(u,2),g=s[0],d=s[1],v=Object(a.useState)(""),h=Object(f.a)(v,2),O=h[0],E=h[1],w=Object(a.useState)(""),j=Object(f.a)(w,2),x=j[0],T=j[1],N=function(){var t=Object(m.a)(p.a.mark(function t(n){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,a={username:c,name:g,password:O},t.next=5,b.create(a);case 5:o(""),d(""),E(""),T(""),e.login(a.username,a.password),C.a.info("Welcome ".concat(a.username),{position:C.a.POSITION.TOP_CENTER}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),T(t.t0.response.data.error);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(l.a,null,r.a.createElement(l.a.Column,null,r.a.createElement(y.a,{style:{padding:"20px"}},r.a.createElement(k.a,{onSubmit:N},r.a.createElement(i.a,{as:"h2",color:"blue"},"Sign up"),""!==x&&r.a.createElement(I.a,null,x),r.a.createElement(k.a.Input,{label:"Username",placeholder:"Username (3-15 characters)",value:c,name:"username",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(k.a.Input,{label:"Name",placeholder:"Name (2-30 characters)",value:g,name:"name",onChange:function(e){var t=e.target;return d(t.value)}}),r.a.createElement(k.a.Input,{label:"Password",placeholder:"Password (min. 5 characters)",value:O,type:"password",name:"password",onChange:function(e){var t=e.target;return E(t.value)}}),r.a.createElement(S.a,{color:"blue",fluid:!0,size:"large"},"Sign up")))))}),N=Object(u.b)(null,{login:j})(function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),l=Object(f.a)(u,2),i=l[0],s=l[1],g=Object(a.useState)(""),d=Object(f.a)(g,2),b=d[0],v=d[1],h=function(){var t=Object(m.a)(p.a.mark(function t(n){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.login(c,i);case 3:(a=t.sent)?(s(""),v(a.data.error)):C.a.info("Welcome ".concat(c),{position:C.a.POSITION.TOP_CENTER});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(k.a,{onSubmit:h},r.a.createElement(k.a.Group,{inline:!0},r.a.createElement(k.a.Input,{icon:"user",iconPosition:"left",placeholder:"Username",name:"username",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(k.a.Input,{icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:function(e){var t=e.target;return s(t.value)}}),r.a.createElement(S.a,{color:"blue"},"Login")),""!==b&&r.a.createElement(I.a,null,b))}),A=n(188),G=n.n(A),L=function(){return r.a.createElement(l.a,{columns:2},r.a.createElement(l.a.Row,null,r.a.createElement(l.a.Column,null),r.a.createElement(l.a.Column,{style:{padding:"50px"}},r.a.createElement(N,null))),r.a.createElement(l.a.Row,null,r.a.createElement(l.a.Column,null,r.a.createElement(i.a,{size:"huge"},"Pickupgame finder",r.a.createElement(i.a.Subheader,null,"Find local pickupgames and start balling")),r.a.createElement("img",{src:G.a,alt:"Basketball legend Kobe Bryant",style:{maxWidth:"60%",maxHeight:"60%"}})),r.a.createElement(l.a.Column,null,r.a.createElement(T,null))))},D=n(379),P=n(377),_=n(367),z=n(378),M=Object(u.b)(function(e){return{games:e.games,location:e.location}})(function(e){return r.a.createElement(D.a,{center:null===e.location?[0,0]:[e.location.lat,e.location.lng],zoom:null===e.location?2:13,maxZoom:17,dragging:!0},r.a.createElement(P.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),e.games.map(function(e){return r.a.createElement(_.a,{key:e.id,position:[e.location.lat,e.location.long]},r.a.createElement(z.a,null,r.a.createElement("button",{onClick:function(){return function(e){w.create({game:e})}(e.id)}},"Join game"),e.desc))}))}),U=n(373),H=Object(u.b)(null,{logOut:function(){return function(){var e=Object(m.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedInUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){return r.a.createElement(U.a,{inverted:!0,style:{marginBottom:"0"}},r.a.createElement(U.a.Item,{name:"home"},"Home"),r.a.createElement(U.a.Item,{position:"right",name:"settings",onClick:function(){return e.logOut()}},"Logout"))}),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GAMES":return t.data;case"ADD_GAME":return e.concat(t.data);default:return e}},J=Object(u.b)(function(e){return{location:e.location}},{createGame:function(e){return function(){var t=Object(m.a)(p.a.mark(function t(n){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.create(e);case 3:a=t.sent,n({type:"ADD_GAME",data:a}),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}})(function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),s=Object(f.a)(u,2),g=s[0],d=s[1],b=Object(a.useState)(10),v=Object(f.a)(b,2),h=v[0],O=v[1],E=Object(a.useState)(""),w=Object(f.a)(E,2),j=w[0],x=w[1],T=function(){var t=Object(m.a)(p.a.mark(function t(n){var a,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={durationMins:c,location:e.location,desc:g,maxParticipants:h},t.next=4,e.createGame(a);case 4:(r=t.sent)?x(r.data.error):(C.a.info("Succesfully created a game for ".concat(h," people in your location"),{position:C.a.POSITION.TOP_CENTER}),o(""),d(""),O(10),x(""),e.toggler());case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(l.a,{style:{position:"absolute",top:"0",right:"0",zIndex:"999",marginTop:"35px",marginRight:"10px"}},r.a.createElement(l.a.Column,null,r.a.createElement(y.a,{style:{padding:"20px"}},r.a.createElement(S.a,{size:"mini",onClick:e.toggler},"x"),r.a.createElement(k.a,{onSubmit:T},r.a.createElement(i.a,{as:"h2",color:"blue"},"Start a game!"),""!==j&&r.a.createElement(I.a,null,j),r.a.createElement(k.a.Input,{type:"number",label:"Duration",placeholder:"Duration in minutes (1-180 mins)",value:c,name:"Duration",onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(k.a.Input,{label:"Description",placeholder:"Description (5-140 characters)",value:g,name:"Description",onChange:function(e){var t=e.target;return d(t.value)}}),r.a.createElement(k.a.Input,{type:"number",label:"Maximum amount of participants",placeholder:"Max amount of participants (1-30 participants)",value:h,name:"maxParticipants",onChange:function(e){var t=e.target;return O(t.value)}}),r.a.createElement(S.a,{color:"blue",fluid:!0,size:"large"},"Create a game")))))}),B=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],c=t[1],o=function(){c(!n)};return r.a.createElement("div",null,r.a.createElement(H,null),r.a.createElement(M,null),n&&r.a.createElement(J,{toggler:o}),!n&&r.a.createElement(S.a,{primary:!0,style:{position:"absolute",top:"50px",right:"10px",zIndex:"999"},onClick:o},"New Game"))},W=function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("http://ip-api.com/json");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCATION":return t.location;default:return e}},F=n(368);n(355);C.a.configure();var K=Object(u.b)(function(e){return{user:e.user}},{initializeGames:function(){return function(){var e=Object(m.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAllActive();case 2:n=e.sent,t({type:"INIT_GAMES",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},stayLoggedIn:function(e){return function(){var t=Object(m.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.setToken(e.token),w.setToken(e.token),n({type:"STAY_LOGGED_IN",user:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},changeLocation:function(){return function(){var e=Object(m.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};t({type:"CHANGE_LOCATION",location:n})},function(e){console.log("failed to get location",e),W().then(function(e){var n={lat:e.lat,lng:e.lon};t({type:"CHANGE_LOCATION",location:n})})}):(console.log("geolocation not supported in this browser"),W().then(function(e){var n={lat:e.lat,lng:e.lon};t({type:"CHANGE_LOCATION",location:n})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){return Object(a.useEffect)(function(){e.initializeGames()},[]),Object(a.useEffect)(function(){var t=window.localStorage.getItem("loggedInUser");if(t){var n=JSON.parse(t);e.stayLoggedIn(n)}},[]),Object(a.useEffect)(function(){e.changeLocation()},[]),null===e.user?r.a.createElement(F.a,null,r.a.createElement(L,null)):r.a.createElement("div",null,r.a.createElement(B,null))}),Z=n(63),q=n(190),Q=Object(Z.c)({games:R,user:x,location:Y}),V=Object(Z.d)(Q,Object(Z.a)(q.a));o.a.render(r.a.createElement(u.a,{store:V},r.a.createElement(K,null)),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.02aeeab9.chunk.js.map