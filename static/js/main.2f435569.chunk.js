(window["webpackJsonppick-up-game-finder"]=window["webpackJsonppick-up-game-finder"]||[]).push([[0],{244:function(e,t,a){e.exports=a.p+"static/media/kobe.4b4fdbac.jpg"},246:function(e,t,a){e.exports=a.p+"static/media/bball.527662f6.svg"},268:function(e,t,a){e.exports=a(452)},451:function(e,t,a){},452:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(39),o=a.n(c),l=a(37),i=a(477),u=a(473),s=a(462),m=a(472),p=a(475),d=a(463),f=a(20),g=a.n(f),h=a(24),v=a(12),E=a(43),b=a.n(E),y="";y="https://pickupgamefinder.herokuapp.com";var k={create:function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(y).concat("/api/users"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O="";O="https://pickupgamefinder.herokuapp.com";var S={login:function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(O).concat("/api/login"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=null,w="";w="https://pickupgamefinder.herokuapp.com";var x={getAllActive:function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(w).concat("/api/games","/active"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:C}},e.next=3,b.a.post("".concat(w).concat("/api/games"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){C="bearer ".concat(e)}},j=null,N="";N="https://pickupgamefinder.herokuapp.com";var I={setToken:function(e){j="bearer ".concat(e)},create:function(){var e=Object(h.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:j}},e.next=3,b.a.post("".concat(N).concat("/api/players"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(e,t){return function(){var a=Object(h.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.login({username:e,password:t});case 3:r=a.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(r)),x.setToken(r.token),I.setToken(r.token),n({type:"LOGIN",user:r}),a.next=13;break;case 10:return a.prev=10,a.t0=a.catch(0),a.abrupt("return",a.t0.response);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"STAY_LOGGED_IN":return t.user;case"LOGOUT":return null;default:return e}},L=a(464),A=a(469),P=a(470),D=a(33),z=Object(l.b)(null,{login:T})((function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(v.a)(l,2),s=i[0],d=i[1],f=Object(n.useState)(""),E=Object(v.a)(f,2),b=E[0],y=E[1],O=Object(n.useState)(""),S=Object(v.a)(O,2),C=S[0],w=S[1],x="dark"===e.colorScheme?"white":"black",j="dark"===e.colorScheme?"inputDark":"",N="dark"===e.colorScheme?"segmentDark":"",I=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,n={username:c,name:s,password:b},t.next=5,k.create(n);case 5:o(""),d(""),y(""),w(""),e.login(n.username,n.password),D.a.info("Welcome ".concat(n.username),{position:D.a.POSITION.TOP_CENTER}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),w(t.t0.response.data.error);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(m.a,null,r.a.createElement(m.a.Column,null,r.a.createElement(u.a,{className:N},r.a.createElement(L.a,{onSubmit:I},r.a.createElement(p.a,{as:"h2",style:{color:x}},"Sign up"),""!==C&&r.a.createElement(A.a,null,C),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:x}},"Username"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{className:j,id:"username",type:"text",placeholder:"Username (3-15 characters)",value:c,onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:x}},"Name"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{className:j,id:"name",type:"text",placeholder:"Name (2-30 characters)",value:s,onChange:function(e){var t=e.target;return d(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{style:{color:x}},"Password"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{className:j,id:"password",type:"password",placeholder:"Password (min. 5 characters)",value:b,onChange:function(e){var t=e.target;return y(t.value)}}))),r.a.createElement(P.a,{color:"blue",fluid:!0,size:"large",id:"accountCreation-button"},"Sign up")))))})),_=Object(l.b)(null,{login:T})((function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(v.a)(l,2),u=i[0],s=i[1],m=Object(n.useState)(""),d=Object(v.a)(m,2),f=d[0],E=d[1],b="dark"===e.colorScheme?"inputDark":"",y=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.login(c,u);case 3:(n=t.sent)?(s(""),E(n.data.error)):D.a.info("Welcome ".concat(c),{position:D.a.POSITION.TOP_CENTER});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(L.a,{onSubmit:y},r.a.createElement(p.a,{as:"h2",style:{color:e.textColor}},"Login"),r.a.createElement(L.a.Group,{inline:!0,widths:"equal"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{className:b,id:"login-username",type:"text",placeholder:"Username",value:c,onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{className:b,id:"login-password",type:"password",placeholder:"Password",value:u,onChange:function(e){var t=e.target;return s(t.value)}}))),r.a.createElement(P.a,{color:"blue",id:"login-button"},"Login")),""!==f&&r.a.createElement(A.a,null,f))})),R=a(244),H=a.n(R),M=function(e){var t=e.colorScheme,a="dark"===t?"white":"black",n="dark"===t?"segmentDark":"";return r.a.createElement("div",null,r.a.createElement(i.a,{minWidth:768},r.a.createElement(u.a,{inverted:!0,style:{minHeight:600,padding:"1em 0em"},vertical:!0},r.a.createElement(s.a,null,r.a.createElement(m.a,{columns:2,style:{marginTop:"25px"}},r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null),r.a.createElement(m.a.Column,null,r.a.createElement(_,{colorScheme:t,textColor:"white"})))),r.a.createElement(p.a,{as:"h1",inverted:!0,style:{fontWeight:"normal",fontSize:"3em",marginBottom:0,marginTop:"3em"}},"Pickupgame finder"),r.a.createElement(p.a,{as:"h2",inverted:!0,style:{fontSize:"1.5em",fontWeight:"normal",marginTop:"1em"}},"Find local pickupgames and start playing!",r.a.createElement("br",null)," Sign up below!"))),r.a.createElement(s.a,null,r.a.createElement(m.a,{columns:2},r.a.createElement(m.a.Row,{style:{marginTop:"100px"}},r.a.createElement(m.a.Column,null,r.a.createElement("img",{src:H.a,alt:"Basketball legend Kobe Bryant",style:{maxWidth:"65%",maxHeight:"65%"}})),r.a.createElement(m.a.Column,null,r.a.createElement(z,{colorScheme:t})))))),r.a.createElement(i.a,{maxWidth:767},r.a.createElement(u.a,{inverted:!0,textAlign:"center",style:{minHeight:250,padding:"1em 0em"},vertical:!0},r.a.createElement(s.a,{text:!0},r.a.createElement(p.a,{as:"h1",inverted:!0,style:{fontWeight:"normal",marginBottom:0,marginTop:"2em"}},"Pickupgame finder",r.a.createElement(p.a.Subheader,{style:{fontWeight:"normal",marginTop:"0.5em"}},"Find local pickupgames and start playing!")))),r.a.createElement(s.a,null,r.a.createElement(u.a,{style:{marginTop:"30px"},className:n},r.a.createElement(_,{colorScheme:t,textColor:"dark"===t?"white":"black"})),r.a.createElement(d.a,{horizontal:!0},r.a.createElement("p",{style:{color:a}},"OR")),r.a.createElement(z,{colorScheme:t}))))},V=a(124),U=a(51),F=a(257),W=a(246),B=a.n(W),J=function(e){var t=e.cluster,a=e.zoom,n=t.properties;return r.a.createElement(U.b,{latitude:n.location.lat,longitude:n.location.long},r.a.createElement("div",{onClick:function(){a(t)}},r.a.createElement("img",{src:B.a,alt:"basketballgame here",style:{height:"25px",width:"25px"}})))},Z=function(e){var t=e.clusters,a=e.zoom;return t.map((function(e){var t=Object(v.a)(e.geometry.coordinates,2),n=t[0],c=t[1];return e.properties.cluster?r.a.createElement(U.b,{key:e.id,latitude:c,longitude:n},r.a.createElement("div",{onClick:function(){return a(e)},style:{color:"black",backgroundColor:"#cc5500",borderRadius:"50%",width:"25px",height:"25px",textAlign:"center",lineHeight:"25px"}},e.properties.point_count)):r.a.createElement(J,{key:e.properties.id,cluster:e,zoom:a})}))},Y=a(465),q=a(62),X=a(467),K=function(e){var t=e.gameInfo,a=e.setSelected,n=e.prevSelected,c=e.setPrevSelected,o=e.joinGame,l=e.colorScheme,i={textColor:"dark"===l?"white":"black",backgroundColor:"dark"===l?"#141d26":"",inverted:"dark"===l},u=null!==n,s=t.endTime.slice(0,10),m=t.endTime.slice(11,16);return r.a.createElement(Y.a,{defaultOpen:!0,onClose:function(){c(null),a(null)},closeOnDimmerClick:!1,closeIcon:!0},r.a.createElement(Y.a.Header,{style:{backgroundColor:i.backgroundColor}},u&&r.a.createElement(q.a,{inverted:i.inverted,link:!0,name:"arrow left",onClick:function(){a(n)}})),r.a.createElement(Y.a.Content,{style:{backgroundColor:i.backgroundColor}},r.a.createElement(P.a,{floated:"right",primary:!0,onClick:function(){return o(t.id)}},"Join"),r.a.createElement(Y.a.Description,null,r.a.createElement(p.a,{style:{color:i.textColor}},"Game by ",t.owner.username),r.a.createElement("p",{style:{color:i.textColor}},t.desc),r.a.createElement("p",{style:{color:i.textColor}},"Participants: (",t.participants.length,"/",t.maxParticipants,")"),r.a.createElement(X.a,{bulleted:!0},t.participants.map((function(e){return r.a.createElement(X.a.Item,{key:e.id,style:{color:i.textColor}},e.username)}))),r.a.createElement(d.a,null),r.a.createElement("p",{style:{color:i.textColor}},"Game ends at: ",s," ",m," GMT"))))},Q=a(468),$=function(e){var t=e.clusterInfo,a=e.supercluster,n=e.setSelected,c=e.setPrevSelected,o=e.colorScheme,l=a.getLeaves(t.id),i={textColor:"dark"===o?"white":"black",backgroundColor:"dark"===o?"#141d26":"",cardColor:"dark"===o?"#1c2836":""};return r.a.createElement(Y.a,{defaultOpen:!0,onClose:function(){c(null),n(null)},closeOnDimmerClick:!1,closeIcon:!0},r.a.createElement(Y.a.Header,{style:{backgroundColor:i.backgroundColor,color:i.textColor}},"Games in this location"),r.a.createElement(Y.a.Content,{style:{backgroundColor:i.backgroundColor}},l.map((function(e,a){return r.a.createElement(Q.a,{style:{backgroundColor:i.cardColor},fluid:!0,onClick:function(){c(t),n(e)},key:e.properties.id},r.a.createElement(Q.a.Content,null,r.a.createElement(Q.a.Header,{style:{color:i.textColor}},"Game ",a),r.a.createElement(Q.a.Meta,{style:{color:i.textColor}},"Created by ",e.properties.owner.username),r.a.createElement(Q.a.Description,{style:{color:i.textColor}},e.properties.desc)))}))))},ee=function(e){var t=e.selectedCluster,a=e.prevSelected,n=e.setSelected,c=e.setPrevSelected,o=e.joinGame,l=e.supercluster,i=e.colorScheme;return t.properties.cluster?r.a.createElement($,{clusterInfo:t,supercluster:l,setSelected:n,setPrevSelected:c,colorScheme:i}):r.a.createElement(K,{gameInfo:t.properties,setSelected:n,prevSelected:a,setPrevSelected:c,joinGame:o,colorScheme:i})},te=a(471),ae=a(466),ne=function(e){return window.localStorage.setItem("colorScheme",e),{type:"CHANGE_COLOR",colorScheme:e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_COLOR":return t.colorScheme;default:return e}},ce=Object(l.b)((function(e){return{colorScheme:e.colorScheme,user:e.user}}),{logOut:function(){return function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedInUser"),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeColor:ne})((function(e){var t="dark"===e.colorScheme?"#141d26":"#0E6EB8";return r.a.createElement(te.a,{style:{backgroundColor:t}},r.a.createElement(te.a.Item,{name:"home",style:{color:"white"}},"Home"),r.a.createElement(te.a.Menu,{position:"right"},r.a.createElement(ae.a,{item:!0,style:{color:"white"},text:e.user.username},r.a.createElement(ae.a.Menu,{style:{backgroundColor:t}},r.a.createElement(ae.a.Item,{onClick:function(){var t="light"===e.colorScheme?"dark":"light";e.changeColor(t)}},r.a.createElement("p",{style:{color:"white"}},"light"===e.colorScheme?"Use Darkmode":"Use lightmode")),r.a.createElement(ae.a.Item,{onClick:function(){return e.logOut()},style:{color:"white"}},r.a.createElement("p",{style:{color:"white"}},"Logout"))))))})),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_GAMES":return t.data;case"ADD_GAME":return e.concat(t.data);case"ADD_PLAYER":var a=e.find((function(e){return e.id===t.gameId}));return a.participants=a.participants.concat(t.user),e.map((function(e){return e.id===t.gameId?a:e}));default:return e}},le=Object(l.b)((function(e){return{location:e.location,colorScheme:e.colorScheme}}),{createGame:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.create(e);case 3:n=t.sent,a({type:"ADD_GAME",data:n}),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(""),a=Object(v.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(v.a)(l,2),s=i[0],d=i[1],f=Object(n.useState)(""),E=Object(v.a)(f,2),b=E[0],y=E[1],k=Object(n.useState)(""),O=Object(v.a)(k,2),S=O[0],C=O[1],w="dark"===e.colorScheme?"inputDark":"",x="dark"===e.colorScheme?"white":"black",j="dark"===e.colorScheme?"segmentDarkest":"",N=e.radioValue,I=e.setRadioValue,T=e.location,G=e.latestClick,z=e.setNewGameLocation;Object(n.useEffect)((function(){z("curr"===N?T:G)}),[G,T,z,N]);var _=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={durationMins:c,location:e.newGameLocation,desc:s,maxParticipants:b},t.next=4,e.createGame(n);case 4:(r=t.sent)?C(r.data.error):(D.a.info("Created a game for ".concat(b," players!"),{position:D.a.POSITION.TOP_CENTER}),o(""),d(""),y(10),C(""),I("curr"),e.setNewGameLocation({lat:0,lng:0}),e.setLatestClick({lat:0,lng:0}),e.setFormVisible(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return e.formVisible?r.a.createElement("div",null,r.a.createElement(m.a,{style:{position:"absolute",top:"0",right:"0",marginTop:"35px",marginRight:"10px",zIndex:"9"}},r.a.createElement(m.a.Column,null,r.a.createElement(u.a,{className:j},r.a.createElement(q.a,{name:"close",size:"large",inverted:"dark"===e.colorScheme,style:{position:"absolute",right:"0",top:"1"},onClick:function(){return e.setFormVisible(!1)}}),r.a.createElement(L.a,{onSubmit:_},r.a.createElement(p.a,{as:"h2",style:{color:x}},"Start a game!"),""!==S&&r.a.createElement(A.a,null,S),r.a.createElement(p.a,{as:"h4",style:{color:x}},"Location"),r.a.createElement(L.a.Group,{inline:!0},r.a.createElement(L.a.Radio,{value:"select",checked:"select"===N,onChange:function(){return I("select")}}),r.a.createElement("label",{style:{color:x}},"Select from map"),r.a.createElement(L.a.Radio,{value:"curr",checked:"curr"===N,onChange:function(){return I("curr")}}),r.a.createElement("label",{style:{color:x}},"Use your location")),r.a.createElement("p",{style:{color:x}},"lat: ",e.newGameLocation.lat.toFixed(4)),r.a.createElement("p",{style:{color:x}},"long: ",e.newGameLocation.lng.toFixed(4)),r.a.createElement("div",{className:"field"},r.a.createElement(p.a,{as:"h4",style:{color:x}},"Duration"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"duration",className:w,type:"number",placeholder:"Duration in mins (1-180)",value:c,onChange:function(e){var t=e.target;return o(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement(p.a,{as:"h4",style:{color:x}},"Description"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"description",className:w,type:"text",placeholder:"Description (5-140 chars)",value:s,onChange:function(e){var t=e.target;return d(t.value)}}))),r.a.createElement("div",{className:"field"},r.a.createElement(p.a,{as:"h4",style:{color:x}},"Maximum Players"),r.a.createElement("div",{className:"ui fluid input"},r.a.createElement("input",{id:"participants",className:w,type:"number",placeholder:"Max amount of participants (1-30)",value:b,onChange:function(e){var t=e.target;return y(t.value)}}))),r.a.createElement(P.a,{color:"blue",fluid:!0,size:"large",id:"gamecreation-button"},"Create a game")))))):r.a.createElement(P.a,{primary:!0,style:{position:"absolute",top:"50px",right:"10px",zIndex:"9"},onClick:function(){return e.setFormVisible(!0)}},"New Game")})),ie=function(e){var t=e.location;return r.a.createElement(U.b,{latitude:t.lat,longitude:t.lng},r.a.createElement(q.a,{name:"map marker alternate",color:"red",size:"big"}))},ue=function(){return r.a.createElement(s.a,null,r.a.createElement(A.a,{icon:!0,warning:!0},r.a.createElement(q.a,{name:"location arrow"}),r.a.createElement(A.a.Content,null,r.a.createElement(A.a.Header,null,"Pls, give location"),"Please accept or deny the use of your location to continue using the app")))},se=Object(l.b)((function(e){return{points:e.games.map((function(e){return{type:"Feature",properties:Object(V.a)({cluster:!1},e),geometry:{type:"Point",coordinates:[e.location.long,e.location.lat]}}})),location:e.location,colorScheme:e.colorScheme}}),{addPlayer:function(e,t){return{type:"ADD_PLAYER",user:e,gameId:t}}})((function(e){var t=Object(n.useState)({}),a=Object(v.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(null),i=Object(v.a)(l,2),u=i[0],s=i[1],m=Object(n.useState)(null),p=Object(v.a)(m,2),d=p[0],f=p[1],E=Object(n.useState)({lat:0,lng:0}),b=Object(v.a)(E,2),y=b[0],k=b[1],O=Object(n.useState)(!1),S=Object(v.a)(O,2),C=S[0],w=S[1],x=Object(n.useState)({lat:0,lng:0}),j=Object(v.a)(x,2),N=j[0],T=j[1],G=Object(n.useState)("curr"),L=Object(v.a)(G,2),A=L[0],P=L[1],z="dark"===e.colorScheme?"mapbox://styles/ogrousu/ck6g74as70kw51io8h0ceo6h3":"mapbox://styles/ogrousu/ckae1dzbv0fvc1ilbhpvgy23t";Object(n.useEffect)((function(){o({latitude:null===e.location?0:e.location.lat,longitude:null===e.location?0:e.location.lng,zoom:null===e.location?0:12,height:"100vh",width:"100vw"})}),[e.location]);var _=Object(n.useRef)(),R=_.current?_.current.getMap().getBounds().toArray().flat():null,H=Object(F.a)({points:e.points,zoom:c.zoom,bounds:R,options:{radius:100,maxZoom:15}}),M=H.clusters,W=H.supercluster,B=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,c,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.create({game:a});case 3:n=t.sent,D.a.info("Joined the game successfully",{position:D.a.POSITION.TOP_CENTER}),e.addPlayer(n.user,n.game),r=u.properties.participants.concat(n.user),c=Object(V.a)({},u.properties,{participants:r}),o={geometry:u.geometry,properties:c,type:u.type},s(o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),D.a.warn(t.t0.response.data.error,{position:D.a.POSITION.TOP_CENTER});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return null===e.location?r.a.createElement(ue,null):r.a.createElement("div",null,r.a.createElement(le,{latestClick:y,setLatestClick:k,formVisible:C,setFormVisible:w,newGameLocation:N,setNewGameLocation:T,radioValue:A,setRadioValue:P}),r.a.createElement(U.c,Object.assign({getCursor:function(e){var t=e.isDragging;return"select"===A?"crosshair":t?"grabbing":"grab"},maxZoom:15,ref:_},c,{mapboxApiAccessToken:"pk.eyJ1Ijoib2dyb3VzdSIsImEiOiJjazZnNXlhbXAxczQ1M25tdmw1ZzcyeTM2In0.C5qgovZhdjICee5q6Zt_sg",mapStyle:z,onViewportChange:function(e){o(e)},onClick:function(e){"select"===A&&k({lat:e.lngLat[1],lng:e.lngLat[0]})}}),r.a.createElement(ce,null),C&&r.a.createElement(ie,{location:N}),r.a.createElement(Z,{clusters:M,zoom:function(e){var t=e.id?Math.min(W.getClusterExpansionZoom(e.id),15):15,a=Object(v.a)(e.geometry.coordinates,2),n=a[0],r=a[1];s(e),o(Object(V.a)({},c,{latitude:r,longitude:n,zoom:t,transitionInterpolator:new U.a({speed:1}),transitionDuration:"auto"}))}}),u&&r.a.createElement(ee,{selectedCluster:u,prevSelected:d,setSelected:s,setPrevSelected:f,joinGame:B,supercluster:W,colorScheme:e.colorScheme})))})),me=function(){var e=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://ipapi.co/json/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOCATION":return t.location;default:return e}};a(450),a(451);D.a.configure({autoClose:3500,hideProgressBar:!0});var de=Object(l.b)((function(e){return{user:e.user,colorScheme:e.colorScheme}}),{initializeGames:function(){return function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAllActive();case 2:a=e.sent,t({type:"INIT_GAMES",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},stayLoggedIn:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.setToken(e.token),I.setToken(e.token),a({type:"STAY_LOGGED_IN",user:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeLocation:function(){return function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var a={lat:e.coords.latitude,lng:e.coords.longitude};t({type:"CHANGE_LOCATION",location:a})}),(function(e){console.log("failed to get location",e),me().then((function(e){console.log("response",e);var a={lat:e.latitude,lng:e.longitude};t({type:"CHANGE_LOCATION",location:a})}))})):(console.log("geolocation not supported in this browser"),me().then((function(e){var a={lat:e.latitude,lng:e.longitude};t({type:"CHANGE_LOCATION",location:a})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},changeColor:ne})((function(e){var t=e.initializeGames,a=e.stayLoggedIn,c=e.changeLocation,o=e.changeColor;return Object(n.useEffect)((function(){t()}),[t]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);a(t)}}),[a]),Object(n.useEffect)((function(){c()}),[c]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("colorScheme");o(e||"light")}),[o]),null===e.user?r.a.createElement("div",{className:"dark"===e.colorScheme?"bodyDark":"bodyLight"},r.a.createElement(M,{colorScheme:e.colorScheme})):r.a.createElement("div",null,r.a.createElement(se,null))})),fe=a(78),ge=a(256),he=Object(fe.c)({games:oe,user:G,location:pe,colorScheme:re}),ve=Object(fe.d)(he,Object(fe.a)(ge.a));o.a.render(r.a.createElement(l.a,{store:ve},r.a.createElement(de,null)),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.2f435569.chunk.js.map